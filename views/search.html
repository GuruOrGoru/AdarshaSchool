{{define "search"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Search - {{.SiteName}}</title>
    <link rel="icon" href="/static/favicon.ico" type="image/jpeg">
    <style>
        :root {
            --wf-gold: #d4af37;
            --wf-black: #000000;
            --wf-dark-gray: #2c2c2c;
            --wf-light-gray: #f8f8f8;
            --wf-white: #ffffff;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            --radius: 8px;
        }

        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--wf-light-gray);
            padding-top: 70px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .search-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .search-title {
            color: var(--wf-black);
            font-family: 'Georgia', serif;
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .search-form {
            max-width: 600px;
            margin: 0 auto;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 1rem 1.5rem;
            font-size: 1.1rem;
            border: 2px solid #ddd;
            border-radius: 50px;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .search-input:focus {
            border-color: var(--wf-gold);
        }

        .search-button {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--wf-gold);
            color: var(--wf-white);
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s ease;
        }

        .search-button:hover {
            background: #b8860b;
        }

        .search-results {
            margin-top: 2rem;
        }

        .results-section {
            margin-bottom: 3rem;
        }

        .section-title {
            color: var(--wf-dark-gray);
            font-size: 1.5rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--wf-gold);
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .result-card {
            background: var(--wf-white);
            border-radius: var(--radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease;
        }

        .result-card:hover {
            transform: translateY(-2px);
        }

        .result-title {
            color: var(--wf-black);
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .result-title a {
            color: inherit;
            text-decoration: none;
        }

        .result-title a:hover {
            color: var(--wf-gold);
        }

        .result-description {
            color: var(--wf-dark-gray);
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .result-meta {
            color: #666;
            font-size: 0.9rem;
        }

        .result-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: var(--radius);
            margin-bottom: 1rem;
        }

        .no-results {
            text-align: center;
            color: var(--wf-dark-gray);
            font-size: 1.1rem;
            padding: 2rem;
        }

        .page-result {
            display: flex;
            align-items: center;
            padding: 1rem;
            background: var(--wf-white);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 1rem;
            transition: transform 0.3s ease;
        }

        .page-result:hover {
            transform: translateX(5px);
        }

        .page-icon {
            font-size: 2rem;
            color: var(--wf-gold);
            margin-right: 1rem;
        }

        .page-content {
            flex: 1;
        }

        .page-title {
            color: var(--wf-black);
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .page-title a {
            color: inherit;
            text-decoration: none;
        }

        .page-title a:hover {
            color: var(--wf-gold);
        }

        .page-description {
            color: var(--wf-dark-gray);
            font-size: 0.9rem;
        }

        .search-stats {
            background: var(--wf-white);
            padding: 1rem;
            border-radius: var(--radius);
            margin-bottom: 2rem;
            text-align: center;
            color: var(--wf-dark-gray);
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .search-title {
                font-size: 2rem;
            }

            .results-grid {
                grid-template-columns: 1fr;
            }

            .page-result {
                flex-direction: column;
                text-align: center;
            }

            .page-icon {
                margin-right: 0;
                margin-bottom: 0.5rem;
            }
        }
    </style>
</head>

<body>
        {{template "navbar-partial" .}}

    <main>
        <div class="container">
            <div class="search-header">
                <h1 class="search-title">Search {{.SiteName}}</h1>
                <form class="search-form" method="GET" action="/search">
                    <input 
                        type="text" 
                        name="q" 
                        class="search-input" 
                        placeholder="Search news, events, vacancies, and pages..."
                        value="{{.Query}}"
                        autofocus
                    >
                    <button type="submit" class="search-button">Search</button>
                </form>
            </div>

            {{if .Query}}
                <div class="search-stats">
                    {{$totalResults := add (len .News) (len .Events) (len .Vacancies) (len .Pages)}}
                    {{if gt $totalResults 0}}
                        Found {{$totalResults}} result{{if ne $totalResults 1}}s{{end}} for "{{.Query}}"
                    {{else}}
                        No results found for "{{.Query}}"
                    {{end}}
                </div>

                <div class="search-results">
                    {{if .Pages}}
                        <div class="results-section">
                            <h2 class="section-title">Pages</h2>
                            {{range .Pages}}
                                <div class="page-result">
                                    <div class="page-icon">ðŸ“„</div>
                                    <div class="page-content">
                                        <div class="page-title">
                                            <a href="{{.URL}}">{{.Title}}</a>
                                        </div>
                                        <div class="page-description">{{.Description}}</div>
                                    </div>
                                </div>
                            {{end}}
                        </div>
                    {{end}}

                    {{if .News}}
                        <div class="results-section">
                            <h2 class="section-title">News ({{len .News}})</h2>
                            <div class="results-grid">
                                {{range .News}}
                                    <div class="result-card">
                                        {{if .ImageURL}}
                                            <img src="{{.ImageURL}}" alt="{{.Title}}" class="result-image">
                                        {{end}}
                                        <div class="result-title">
                                            <a href="/news">{{.Title}}</a>
                                        </div>
                                        <div class="result-description">{{.Description}}</div>
                                        <div class="result-meta">News Article</div>
                                    </div>
                                {{end}}
                            </div>
                        </div>
                    {{end}}

                    {{if .Events}}
                        <div class="results-section">
                            <h2 class="section-title">Events ({{len .Events}})</h2>
                            <div class="results-grid">
                                {{range .Events}}
                                    <div class="result-card">
                                        {{if .ImageURL}}
                                            <img src="{{.ImageURL}}" alt="{{.Title}}" class="result-image">
                                        {{end}}
                                        <div class="result-title">
                                            <a href="/events">{{.Title}}</a>
                                        </div>
                                        <div class="result-description">{{.Description}}</div>
                                        <div class="result-meta">Event â€¢ {{.Date}}</div>
                                    </div>
                                {{end}}
                            </div>
                        </div>
                    {{end}}

                    {{if .Vacancies}}
                        <div class="results-section">
                            <h2 class="section-title">Vacancies ({{len .Vacancies}})</h2>
                            <div class="results-grid">
                                {{range .Vacancies}}
                                    <div class="result-card">
                                        {{if .ImageURL}}
                                            <img src="{{.ImageURL}}" alt="{{.Title}}" class="result-image">
                                        {{end}}
                                        <div class="result-title">
                                            <a href="/vacancies">{{.Title}}</a>
                                        </div>
                                        <div class="result-description">{{.Description}}</div>
                                        <div class="result-meta">Job Opening</div>
                                    </div>
                                {{end}}
                            </div>
                        </div>
                    {{end}}

                    {{if and (not .Pages) (not .News) (not .Events) (not .Vacancies)}}
                        <div class="no-results">
                            <p>No results found for "{{.Query}}"</p>
                            <p>Try different keywords or check your spelling.</p>
                        </div>
                    {{end}}
                </div>
            {{else}}
                <div class="no-results">
                    <p>Enter a search term above to find news, events, vacancies, and pages.</p>
                </div>
            {{end}}
        </div>
    </main>

        {{template "footer-partial" .}}
</body>

</html>
{{end}}
